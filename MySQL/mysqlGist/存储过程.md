# 存储过程

**对于参数 in ，out ，inout**

```mysql
create procedure p4(in score int,out result varchar(10))
begin
    if score >= 85 then
        set result := 'excellent';
        elseif score >= 60 then
        set result := 'ordinary';
        else
        set result := 'bad';
    end if;
end;

call p4(98,@result);

select @result;
```





```mysql
create procedure p4(IN input int,out output varchar(20) )
    BEGIN
        if input = 30 then
            set output := '而立之年';
        elseif input > 30 then
            set output := '不惑之年';
        else
            set  output := '小孩子';
        end if;
        select output;
    END;
```





```mysql
create procedure p5(inout score double)
begin
    set score = (1/2) * score;
end;
/**
   先要对局部变量赋值，然后再调用存储过程，最后就可以查看以200分为总分，换算实际分数为100分的结果了
 */
set @score = 99;
call p5(@score);
select @score;
```





**case**

```mysql
create procedure p6(in month int)
BEGIN
    declare result varchar(20);
    case
        when month>=1 and month<=3 then
            set result := '第一季度';

        when month>=4 and month<=6 then
            set result := '第二季度';

        when month>=7 and month<=9 then
            set result := '第三季度';

        when month>=10 and month<=12 then
            set result := '第四季度';

        else
            set result = '输入不合法';
        end case ;
    select concat('您输入的月份是：',month,'月,是',result);
end;

call p6(11);
```





**while**

* 计算前n项和

```mysql
create procedure p7(IN n int)
BEGIN
-- 注意，此处如果不设置total的默认值，那么会默认为空，最终无论n的值多大，得到的total值都是null
    declare total int default 0; 
    while n > 0 do
        set total := total + n;
        set n := n-1;
        end while;
    select total;
end;


call p7(3);
```

